import{S as ve,i as ge,s as be,e as b,t as N,k as D,w as H,c as E,a as k,h as A,d as u,m as z,x as J,b as g,g as w,M as m,y as K,q as C,l as ee,j as B,o as P,B as L,Q,p as Z,_ as le,P as U,a9 as te,G as Ee,Z as ke,n as F}from"../../../../chunks/index-bed072e4.js";import{t as Ie}from"../../../../chunks/themes-fa5ad8e6.js";import{i as T}from"../../../../chunks/iconMap-7a0cdc3f.js";import{D as R}from"../../../../chunks/Dropdown-c142f7f6.js";import{f as M,c as se}from"../../../../chunks/utils-c922859c.js";import{_ as O}from"../../../../chunks/lodash-8a03b776.js";import"../../../../chunks/randomColor-af782e7b.js";import"../../../../chunks/v4-bf0bf616.js";function ie(o,e,s){const l=o.slice();return l[14]=e[s],l}function oe(o,e,s){const l=o.slice();return l[17]=e[s],l[19]=s,l}function ne(o,e,s){const l=o.slice();return l[14]=e[s],l}function re(o,e,s){const l=o.slice();return l[17]=e[s],l}function ae(o){let e,s,l,t,r,i,a,h,_;t=new R({props:{$$slots:{menu:[Ve],toggle:[we]},$$scope:{ctx:o}}});let c=o[0].steps[o[2]].aggregations&&fe(o),p=o[0].steps[o[2]].condition&&_e(o),d=o[0].steps[o[2]].value!==void 0&&me(o);return{c(){e=b("div"),s=N("Column"),l=D(),H(t.$$.fragment),r=D(),c&&c.c(),i=D(),a=b("div"),p&&p.c(),h=D(),d&&d.c(),this.h()},l(n){e=E(n,"DIV",{class:!0});var f=k(e);s=A(f,"Column"),f.forEach(u),l=z(n),J(t.$$.fragment,n),r=z(n),c&&c.l(n),i=z(n),a=E(n,"DIV",{class:!0});var v=k(a);p&&p.l(v),h=z(v),d&&d.l(v),v.forEach(u),this.h()},h(){g(e,"class","font-semibold"),g(a,"class","flex items-center space-x-2")},m(n,f){w(n,e,f),m(e,s),w(n,l,f),K(t,n,f),w(n,r,f),c&&c.m(n,f),w(n,i,f),w(n,a,f),p&&p.m(a,null),m(a,h),d&&d.m(a,null),_=!0},p(n,f){const v={};f&16777221&&(v.$$scope={dirty:f,ctx:n}),t.$set(v),n[0].steps[n[2]].aggregations?c?(c.p(n,f),f&5&&C(c,1)):(c=fe(n),c.c(),C(c,1),c.m(i.parentNode,i)):c&&(F(),P(c,1,1,()=>{c=null}),Z()),n[0].steps[n[2]].condition?p?(p.p(n,f),f&5&&C(p,1)):(p=_e(n),p.c(),C(p,1),p.m(a,h)):p&&(F(),P(p,1,1,()=>{p=null}),Z()),n[0].steps[n[2]].value!==void 0?d?d.p(n,f):(d=me(n),d.c(),d.m(a,null)):d&&(d.d(1),d=null)},i(n){_||(C(t.$$.fragment,n),C(c),C(p),_=!0)},o(n){P(t.$$.fragment,n),P(c),P(p),_=!1},d(n){n&&u(e),n&&u(l),L(t,n),n&&u(r),c&&c.d(n),n&&u(i),n&&u(a),p&&p.d(),d&&d.d()}}}function we(o){let e,s,l,t,r,i=o[0].steps[o[2]].column.alias+"",a,h,_;return{c(){e=b("div"),s=b("span"),l=b("i"),r=D(),a=N(i),h=D(),_=b("i"),this.h()},l(c){e=E(c,"DIV",{slot:!0,class:!0});var p=k(e);s=E(p,"SPAN",{class:!0});var d=k(s);l=E(d,"I",{class:!0}),k(l).forEach(u),r=z(d),a=A(d,i),d.forEach(u),h=z(p),_=E(p,"I",{class:!0}),k(_).forEach(u),p.forEach(u),this.h()},h(){g(l,"class",t=T[o[0].steps[o[2]].column.type]+" align-bottom border rounded"),g(s,"class","flex-grow"),g(_,"class","ri-arrow-drop-down-line align-bottom"),g(e,"slot","toggle"),g(e,"class","cursor-pointer flex items-center border bg-zinc-100 border-zinc-300 space-x-1 p-2 rounded")},m(c,p){w(c,e,p),m(e,s),m(s,l),m(s,r),m(s,a),m(e,h),m(e,_)},p(c,p){p&5&&t!==(t=T[c[0].steps[c[2]].column.type]+" align-bottom border rounded")&&g(l,"class",t),p&5&&i!==(i=c[0].steps[c[2]].column.alias+"")&&B(a,i)},d(c){c&&u(e)}}}function ce(o){let e,s,l,t,r,i=o[17].alias+"",a,h,_,c;function p(){return o[8](o[17])}return{c(){e=b("div"),s=b("i"),t=D(),r=b("span"),a=N(i),h=D(),this.h()},l(d){e=E(d,"DIV",{class:!0});var n=k(e);s=E(n,"I",{class:!0}),k(s).forEach(u),t=z(n),r=E(n,"SPAN",{});var f=k(r);a=A(f,i),f.forEach(u),h=z(n),n.forEach(u),this.h()},h(){g(s,"class",l=T[o[17].type]+" align-bottom border rounded"),g(e,"class","hover:bg-opacity-40 bg-opacity-0 bg-zinc-50 space-x-1 p-2")},m(d,n){w(d,e,n),m(e,s),m(e,t),m(e,r),m(r,a),m(e,h),_||(c=U(e,"click",p),_=!0)},p(d,n){o=d,n&1&&l!==(l=T[o[17].type]+" align-bottom border rounded")&&g(s,"class",l),n&1&&i!==(i=o[17].alias+"")&&B(a,i)},d(d){d&&u(e),_=!1,c()}}}function Ve(o){let e,s=o[0].columns,l=[];for(let t=0;t<s.length;t+=1)l[t]=ce(re(o,s,t));return{c(){e=b("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=E(t,"DIV",{slot:!0});var r=k(e);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(u),this.h()},h(){g(e,"slot","menu")},m(t,r){w(t,e,r);for(let i=0;i<l.length;i+=1)l[i].m(e,null)},p(t,r){if(r&5){s=t[0].columns;let i;for(i=0;i<s.length;i+=1){const a=re(t,s,i);l[i]?l[i].p(a,r):(l[i]=ce(a),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(t){t&&u(e),Q(l,t)}}}function fe(o){let e,s,l,t,r,i,a,h,_,c;t=new R({props:{$$slots:{menu:[ze],toggle:[De]},$$scope:{ctx:o}}});let p=o[0].columns,d=[];for(let n=0;n<p.length;n+=1)d[n]=de(oe(o,p,n));return{c(){e=b("div"),s=N("Summarize By"),l=D(),H(t.$$.fragment),r=D(),i=b("div"),a=N("Aggregations"),h=D(),_=b("div");for(let n=0;n<d.length;n+=1)d[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var f=k(e);s=A(f,"Summarize By"),f.forEach(u),l=z(n),J(t.$$.fragment,n),r=z(n),i=E(n,"DIV",{class:!0});var v=k(i);a=A(v,"Aggregations"),v.forEach(u),h=z(n),_=E(n,"DIV",{class:!0});var V=k(_);for(let I=0;I<d.length;I+=1)d[I].l(V);V.forEach(u),this.h()},h(){g(e,"class","font-semibold"),g(i,"class","font-semibold"),g(_,"class","space-y-2")},m(n,f){w(n,e,f),m(e,s),w(n,l,f),K(t,n,f),w(n,r,f),w(n,i,f),m(i,a),w(n,h,f),w(n,_,f);for(let v=0;v<d.length;v+=1)d[v].m(_,null);c=!0},p(n,f){const v={};if(f&16777221&&(v.$$scope={dirty:f,ctx:n}),t.$set(v),f&5){p=n[0].columns;let V;for(V=0;V<p.length;V+=1){const I=oe(n,p,V);d[V]?d[V].p(I,f):(d[V]=de(I),d[V].c(),d[V].m(_,null))}for(;V<d.length;V+=1)d[V].d(1);d.length=p.length}},i(n){c||(C(t.$$.fragment,n),c=!0)},o(n){P(t.$$.fragment,n),c=!1},d(n){n&&u(e),n&&u(l),L(t,n),n&&u(r),n&&u(i),n&&u(h),n&&u(_),Q(d,n)}}}function De(o){let e,s,l=O.startCase(o[0].steps[o[2]].summaryCondition||M[o[0].steps[o[2]].column.type][0])+"",t,r,i;return{c(){e=b("div"),s=b("span"),t=N(l),r=D(),i=b("i"),this.h()},l(a){e=E(a,"DIV",{slot:!0,class:!0});var h=k(e);s=E(h,"SPAN",{class:!0});var _=k(s);t=A(_,l),_.forEach(u),r=z(h),i=E(h,"I",{class:!0}),k(i).forEach(u),h.forEach(u),this.h()},h(){g(s,"class","flex-grow"),g(i,"class","ri-arrow-drop-down-line align-bottom"),g(e,"slot","toggle"),g(e,"class","cursor-pointer flex items-center border border-zinc-300 bg-zinc-100 space-x-1 p-2 rounded")},m(a,h){w(a,e,h),m(e,s),m(s,t),m(e,r),m(e,i)},p(a,h){h&5&&l!==(l=O.startCase(a[0].steps[a[2]].summaryCondition||M[a[0].steps[a[2]].column.type][0])+"")&&B(t,l)},d(a){a&&u(e)}}}function ue(o){let e,s,l=O.startCase(o[14])+"",t,r,i,a;function h(){return o[9](o[14])}return{c(){e=b("div"),s=b("span"),t=N(l),r=D(),this.h()},l(_){e=E(_,"DIV",{class:!0});var c=k(e);s=E(c,"SPAN",{});var p=k(s);t=A(p,l),p.forEach(u),r=z(c),c.forEach(u),this.h()},h(){g(e,"class","hover:bg-opacity-40 bg-opacity-0 bg-zinc-50 cursor-pointer space-x-1 p-2")},m(_,c){w(_,e,c),m(e,s),m(s,t),m(e,r),i||(a=U(e,"click",h),i=!0)},p(_,c){o=_,c&5&&l!==(l=O.startCase(o[14])+"")&&B(t,l)},d(_){_&&u(e),i=!1,a()}}}function ze(o){let e,s=M[o[0].steps[o[2]].column.type],l=[];for(let t=0;t<s.length;t+=1)l[t]=ue(ne(o,s,t));return{c(){e=b("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=E(t,"DIV",{slot:!0});var r=k(e);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(u),this.h()},h(){g(e,"slot","menu")},m(t,r){w(t,e,r);for(let i=0;i<l.length;i+=1)l[i].m(e,null)},p(t,r){if(r&5){s=M[t[0].steps[t[2]].column.type];let i;for(i=0;i<s.length;i+=1){const a=ne(t,s,i);l[i]?l[i].p(a,r):(l[i]=ue(a),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(t){t&&u(e),Q(l,t)}}}function pe(o){let e,s,l,t,r=o[17].alias+"",i,a,h,_=o[0].steps[o[2]].aggregations.map(n)+"",c,p,d;function n(...f){return o[10](o[19],...f)}return{c(){e=b("div"),s=b("i"),t=D(),i=N(r),a=D(),h=b("div"),c=N(_),p=D(),this.h()},l(f){e=E(f,"DIV",{});var v=k(e);s=E(v,"I",{class:!0}),k(s).forEach(u),t=z(v),i=A(v,r),v.forEach(u),a=z(f),h=E(f,"DIV",{class:!0});var V=k(h);c=A(V,_),p=z(V),V.forEach(u),this.h()},h(){g(s,"class",l=T[o[17].type]+" align-bottom"),g(h,"class",d="border "+Ie.mediumBorderColor+" bg-zinc-100 p-2 rounded")},m(f,v){w(f,e,v),m(e,s),m(e,t),m(e,i),w(f,a,v),w(f,h,v),m(h,c),m(h,p)},p(f,v){o=f,v&1&&l!==(l=T[o[17].type]+" align-bottom")&&g(s,"class",l),v&1&&r!==(r=o[17].alias+"")&&B(i,r),v&5&&_!==(_=o[0].steps[o[2]].aggregations.map(n)+"")&&B(c,_)},d(f){f&&u(e),f&&u(a),f&&u(h)}}}function de(o){let e,s=o[17]!==o[0].steps[o[2]].column&&pe(o);return{c(){s&&s.c(),e=ee()},l(l){s&&s.l(l),e=ee()},m(l,t){s&&s.m(l,t),w(l,e,t)},p(l,t){l[17]!==l[0].steps[l[2]].column?s?s.p(l,t):(s=pe(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(l){s&&s.d(l),l&&u(e)}}}function _e(o){let e,s;return e=new R({props:{$$slots:{menu:[ye],toggle:[$e]},$$scope:{ctx:o}}}),{c(){H(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,t){K(e,l,t),s=!0},p(l,t){const r={};t&16777221&&(r.$$scope={dirty:t,ctx:l}),e.$set(r)},i(l){s||(C(e.$$.fragment,l),s=!0)},o(l){P(e.$$.fragment,l),s=!1},d(l){L(e,l)}}}function $e(o){let e,s,l=o[0].steps[o[2]].condition+"",t;return{c(){e=b("div"),s=b("span"),t=N(l),this.h()},l(r){e=E(r,"DIV",{slot:!0,class:!0});var i=k(e);s=E(i,"SPAN",{});var a=k(s);t=A(a,l),a.forEach(u),i.forEach(u),this.h()},h(){g(e,"slot","toggle"),g(e,"class","cursor-pointer border bg-zinc-100 border-zinc-300 space-x-1 p-2 rounded")},m(r,i){w(r,e,i),m(e,s),m(s,t)},p(r,i){i&5&&l!==(l=r[0].steps[r[2]].condition+"")&&B(t,l)},d(r){r&&u(e)}}}function he(o){let e,s,l=o[14]+"",t,r,i,a;function h(){return o[11](o[14])}return{c(){e=b("div"),s=b("span"),t=N(l),r=D(),this.h()},l(_){e=E(_,"DIV",{class:!0});var c=k(e);s=E(c,"SPAN",{});var p=k(s);t=A(p,l),p.forEach(u),r=z(c),c.forEach(u),this.h()},h(){g(e,"class","hover:bg-zinc-50 space-x-1 p-2")},m(_,c){w(_,e,c),m(e,s),m(s,t),m(e,r),i||(a=U(e,"click",h),i=!0)},p(_,c){o=_,c&5&&l!==(l=o[14]+"")&&B(t,l)},d(_){_&&u(e),i=!1,a()}}}function ye(o){let e,s=se[o[0].steps[o[2]].column.type],l=[];for(let t=0;t<s.length;t+=1)l[t]=he(ie(o,s,t));return{c(){e=b("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=E(t,"DIV",{slot:!0});var r=k(e);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(u),this.h()},h(){g(e,"slot","menu")},m(t,r){w(t,e,r);for(let i=0;i<l.length;i+=1)l[i].m(e,null)},p(t,r){if(r&5){s=se[t[0].steps[t[2]].column.type];let i;for(i=0;i<s.length;i+=1){const a=ie(t,s,i);l[i]?l[i].p(a,r):(l[i]=he(a),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},d(t){t&&u(e),Q(l,t)}}}function me(o){let e,s,l;return{c(){e=b("input"),this.h()},l(t){e=E(t,"INPUT",{class:!0,type:!0}),this.h()},h(){g(e,"class","bg-zinc-100 p-2 rounded w-full"),g(e,"type","text")},m(t,r){w(t,e,r),le(e,o[0].steps[o[2]].value),s||(l=U(e,"input",o[12]),s=!0)},p(t,r){r&5&&e.value!==t[0].steps[t[2]].value&&le(e,t[0].steps[t[2]].value)},d(t){t&&u(e),s=!1,l()}}}function Se(o){let e,s,l,t,r,i,a,h=O.startCase(o[2])+"",_,c,p,d,n,f,v,V,I,j,W,$=!o[1]&&ae(o);return{c(){e=b("div"),s=b("div"),l=b("div"),t=b("div"),r=b("i"),a=D(),_=N(h),c=D(),p=b("button"),d=b("i"),n=D(),f=b("button"),v=b("i"),V=D(),$&&$.c(),this.h()},l(y){e=E(y,"DIV",{class:!0});var S=k(e);s=E(S,"DIV",{class:!0});var q=k(s);l=E(q,"DIV",{class:!0});var X=k(l);t=E(X,"DIV",{class:!0});var G=k(t);r=E(G,"I",{class:!0}),k(r).forEach(u),a=z(G),_=A(G,h),G.forEach(u),X.forEach(u),c=z(q),p=E(q,"BUTTON",{});var Y=k(p);d=E(Y,"I",{class:!0}),k(d).forEach(u),Y.forEach(u),n=z(q),f=E(q,"BUTTON",{});var x=k(f);v=E(x,"I",{class:!0}),k(v).forEach(u),x.forEach(u),q.forEach(u),V=z(S),$&&$.l(S),S.forEach(u),this.h()},h(){g(r,"class",i=T[o[0].steps[o[2]].type]+" align-bottom"),g(t,"class","font-semibold"),g(l,"class","flex-grow"),g(d,"class","ri-eye-line align-bottom"),g(v,"class","ri-delete-bin-line align-bottom"),g(s,"class","flex items-center space-x-2 cursor-pointer"),g(e,"class","bg-zinc-200 p-2 rounded space-y-2 text-sm"),te(e,"opacity-20",o[0].steps[o[2]].hidden)},m(y,S){w(y,e,S),m(e,s),m(s,l),m(l,t),m(t,r),m(t,a),m(t,_),m(s,c),m(s,p),m(p,d),m(s,n),m(s,f),m(f,v),m(e,V),$&&$.m(e,null),I=!0,j||(W=[U(p,"click",o[5]),U(f,"click",o[6]),U(s,"click",o[7])],j=!0)},p(y,[S]){(!I||S&5&&i!==(i=T[y[0].steps[y[2]].type]+" align-bottom"))&&g(r,"class",i),(!I||S&4)&&h!==(h=O.startCase(y[2])+"")&&B(_,h),y[1]?$&&(F(),P($,1,1,()=>{$=null}),Z()):$?($.p(y,S),S&2&&C($,1)):($=ae(y),$.c(),C($,1),$.m(e,null)),S&5&&te(e,"opacity-20",y[0].steps[y[2]].hidden)},i(y){I||(C($),I=!0)},o(y){P($),I=!1},d(y){y&&u(e),$&&$.d(),j=!1,Ee(W)}}}function Ce(o,e,s){const l=ke();let{selectedView:t}=e,{step:r}=e,{minimize:i=!0}=e;function a(I){delete t.steps[I],s(0,t),l("deleteStep",t.records)}function h(){l("previewStep",r)}const _=()=>h(),c=()=>a(r),p=()=>s(1,i=!i),d=I=>s(0,t.steps[r].column=I,t),n=I=>s(0,t.steps[r].summaryCondition=I,t),f=(I,j)=>j[I],v=I=>s(0,t.steps[r].condition=I,t);function V(){t.steps[r].value=this.value,s(0,t)}return o.$$set=I=>{"selectedView"in I&&s(0,t=I.selectedView),"step"in I&&s(2,r=I.step),"minimize"in I&&s(1,i=I.minimize)},[t,i,r,a,h,_,c,p,d,n,f,v,V]}class je extends ve{constructor(e){super();ge(this,e,Ce,Se,be,{selectedView:0,step:2,minimize:1})}}export{je as default};
