import{S as L,i as R,s as W,e as b,c as p,a as g,d as u,g as S,k as y,t as B,m as T,h as P,b as _,M as d,P as J,j as K,Q as X,l as q,a9 as H,E as M}from"../../../../chunks/index-bed072e4.js";import{t as O}from"../../../../chunks/themes-fa5ad8e6.js";import{i as A}from"../../../../chunks/iconMap-7a0cdc3f.js";function Q(a,l,e){const s=a.slice();return s[4]=l[e],s}function U(a){let l,e=a[1].columns.length>0&&F(a);return{c(){l=b("div"),e&&e.c()},l(s){l=p(s,"DIV",{});var t=g(l);e&&e.l(t),t.forEach(u)},m(s,t){S(s,l,t),e&&e.m(l,null)},p(s,t){s[1].columns.length>0?e?e.p(s,t):(e=F(s),e.c(),e.m(l,null)):e&&(e.d(1),e=null)},d(s){s&&u(l),e&&e.d()}}}function F(a){let l,e=a[1].columns,s=[];for(let t=0;t<e.length;t+=1)s[t]=G(Q(a,e,t));return{c(){l=b("div");for(let t=0;t<s.length;t+=1)s[t].c()},l(t){l=p(t,"DIV",{});var c=g(l);for(let i=0;i<s.length;i+=1)s[i].l(c);c.forEach(u)},m(t,c){S(t,l,c);for(let i=0;i<s.length;i+=1)s[i].m(l,null)},p(t,c){if(c&3){e=t[1].columns;let i;for(i=0;i<e.length;i+=1){const r=Q(t,e,i);s[i]?s[i].p(r,c):(s[i]=G(r),s[i].c(),s[i].m(l,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=e.length}},d(t){t&&u(l),X(s,t)}}}function G(a){let l,e,s,t,c,i,r,h,w,v,E=a[4].alias+"",k,I,C,n,o,f,V;function D(){return a[3](a[4])}return{c(){l=b("div"),e=b("span"),s=b("i"),c=y(),i=b("i"),w=y(),v=b("span"),k=B(E),I=y(),C=b("i"),n=y(),this.h()},l(z){l=p(z,"DIV",{class:!0});var m=g(l);e=p(m,"SPAN",{class:!0});var N=g(e);s=p(N,"I",{class:!0}),g(s).forEach(u),c=T(N),i=p(N,"I",{class:!0}),g(i).forEach(u),N.forEach(u),w=T(m),v=p(m,"SPAN",{class:!0});var j=g(v);k=P(j,E),j.forEach(u),I=T(m),C=p(m,"I",{class:!0}),g(C).forEach(u),n=T(m),m.forEach(u),this.h()},h(){_(s,"class",t=A[a[4].type]),_(i,"class",r=A[a[4].aggregation]),_(e,"class",h="rounded text-xs bg-["+a[4].source.table.color+"] bg-opacity-80 align-bottom px-1"),_(v,"class","flex-grow"),_(C,"class","ri-delete-bin-line text-zinc-500"),_(l,"class",o=(a[0].column==a[4]?O.lightBackgroundColor:"")+" cursor-pointer flex items-center space-x-2 border-b text-sm border-zinc-200 hover:bg-opacity-40 bg-opacity-0 bg-zinc-50 p-2 w-full shrink-0")},m(z,m){S(z,l,m),d(l,e),d(e,s),d(e,c),d(e,i),d(l,w),d(l,v),d(v,k),d(l,I),d(l,C),d(l,n),f||(V=J(l,"click",D),f=!0)},p(z,m){a=z,m&2&&t!==(t=A[a[4].type])&&_(s,"class",t),m&2&&r!==(r=A[a[4].aggregation])&&_(i,"class",r),m&2&&h!==(h="rounded text-xs bg-["+a[4].source.table.color+"] bg-opacity-80 align-bottom px-1")&&_(e,"class",h),m&2&&E!==(E=a[4].alias+"")&&K(k,E),m&3&&o!==(o=(a[0].column==a[4]?O.lightBackgroundColor:"")+" cursor-pointer flex items-center space-x-2 border-b text-sm border-zinc-200 hover:bg-opacity-40 bg-opacity-0 bg-zinc-50 p-2 w-full shrink-0")&&_(l,"class",o)},d(z){z&&u(l),f=!1,V()}}}function Y(a){let l,e,s,t=a[1].columns.length+"",c,i,r,h,w,v,E,k,I,C,n=a[1].columns.length>0&&U(a);return{c(){l=b("div"),e=b("h4"),s=B("Columns ("),c=B(t),i=B(")"),r=y(),h=b("button"),w=b("i"),E=y(),n&&n.c(),k=q(),this.h()},l(o){l=p(o,"DIV",{class:!0});var f=g(l);e=p(f,"H4",{class:!0});var V=g(e);s=P(V,"Columns ("),c=P(V,t),i=P(V,")"),V.forEach(u),r=T(f),h=p(f,"BUTTON",{class:!0});var D=g(h);w=p(D,"I",{class:!0}),g(w).forEach(u),D.forEach(u),f.forEach(u),E=T(o),n&&n.l(o),k=q(),this.h()},h(){_(e,"class","text-sm font-semibold flex-grow leading-6"),_(w,"class","ri-add-line align-bottom"),h.disabled=v=!a[1].baseTable,_(h,"class","bg-zinc-200 w-6 rounded"),H(h,"opacity-60",!a[1].baseTable),_(l,"class","border-b p-2 flex items-center border-zinc-200")},m(o,f){S(o,l,f),d(l,e),d(e,s),d(e,c),d(e,i),d(l,r),d(l,h),d(h,w),S(o,E,f),n&&n.m(o,f),S(o,k,f),I||(C=J(h,"click",a[2]),I=!0)},p(o,[f]){f&2&&t!==(t=o[1].columns.length+"")&&K(c,t),f&2&&v!==(v=!o[1].baseTable)&&(h.disabled=v),f&2&&H(h,"opacity-60",!o[1].baseTable),o[1].columns.length>0?n?n.p(o,f):(n=U(o),n.c(),n.m(k.parentNode,k)):n&&(n.d(1),n=null)},i:M,o:M,d(o){o&&u(l),o&&u(E),n&&n.d(o),o&&u(k),I=!1,C()}}}function Z(a,l,e){let{inspector:s}=l,{selectedView:t}=l;const c=()=>e(0,s={action:"Add Column"}),i=r=>e(0,s={action:"Column",column:r});return a.$$set=r=>{"inspector"in r&&e(0,s=r.inspector),"selectedView"in r&&e(1,t=r.selectedView)},[s,t,c,i]}class le extends L{constructor(l){super();R(this,l,Z,Y,W,{inspector:0,selectedView:1})}}export{le as default};
