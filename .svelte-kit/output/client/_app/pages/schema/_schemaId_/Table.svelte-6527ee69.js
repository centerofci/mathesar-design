import{S as K,i as L,s as O,w as y,x as A,y as F,q as m,o as p,B as G,l as x,g as H,e as k,t as P,k as D,c as w,a as C,h as R,d as b,m as E,b as $,M as v,p as B,Q as q,Z as U,n as V}from"../../../chunks/index-bed072e4.js";import{t as J}from"../../../chunks/themes-fa5ad8e6.js";import W from"./Column.svelte-5aecc7f6.js";import X from"./Cell.svelte-b38f3a3f.js";import"../../../chunks/iconMap-7a0cdc3f.js";import"../../../chunks/randomColor-af782e7b.js";import"../../../chunks/lodash-8a03b776.js";import"../../../chunks/Dropdown-c142f7f6.js";function S(i,e,a){const r=i.slice();return r[4]=e[a],r[6]=a,r}function M(i,e,a){const r=i.slice();return r[7]=e[a],r[9]=a,r}function N(i,e,a){const r=i.slice();return r[10]=e[a],r}function Q(i){let e,a;return e=new W({props:{column:i[10],table:i[1]}}),{c(){y(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,l){F(e,r,l),a=!0},p(r,l){const h={};l&2&&(h.column=r[10]),l&2&&(h.table=r[1]),e.$set(h)},i(r){a||(m(e.$$.fragment,r),a=!0)},o(r){p(e.$$.fragment,r),a=!1},d(r){G(e,r)}}}function T(i){let e,a,r=i[1].records,l=[];for(let n=0;n<r.length;n+=1)l[n]=j(S(i,r,n));const h=n=>p(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=x()},l(n){for(let s=0;s<l.length;s+=1)l[s].l(n);e=x()},m(n,s){for(let t=0;t<l.length;t+=1)l[t].m(n,s);H(n,e,s),a=!0},p(n,s){if(s&6){r=n[1].records;let t;for(t=0;t<r.length;t+=1){const g=S(n,r,t);l[t]?(l[t].p(g,s),m(l[t],1)):(l[t]=j(g),l[t].c(),m(l[t],1),l[t].m(e.parentNode,e))}for(V(),t=r.length;t<l.length;t+=1)h(t);B()}},i(n){if(!a){for(let s=0;s<r.length;s+=1)m(l[s]);a=!0}},o(n){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)p(l[s]);a=!1},d(n){q(l,n),n&&b(e)}}}function Z(i){let e,a;function r(){return i[3](i[9],i[6])}return e=new X({props:{cell:i[7],column:i[1].columns[i[9]]}}),e.$on("editCell",r),{c(){y(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,h){F(e,l,h),a=!0},p(l,h){i=l;const n={};h&2&&(n.cell=i[7]),h&2&&(n.column=i[1].columns[i[9]]),e.$set(n)},i(l){a||(m(e.$$.fragment,l),a=!0)},o(l){p(e.$$.fragment,l),a=!1},d(l){G(e,l)}}}function j(i){let e,a,r,l,h,n,s=i[4],t=[];for(let o=0;o<s.length;o+=1)t[o]=Z(M(i,s,o));const g=o=>p(t[o],1,1,()=>{t[o]=null});return{c(){e=k("div"),a=k("div"),r=P(i[6]),l=D();for(let o=0;o<t.length;o+=1)t[o].c();h=D(),this.h()},l(o){e=w(o,"DIV",{class:!0});var d=C(e);a=w(d,"DIV",{class:!0});var c=C(a);r=R(c,i[6]),c.forEach(b),l=E(d);for(let f=0;f<t.length;f+=1)t[f].l(d);h=E(d),d.forEach(b),this.h()},h(){$(a,"class","p-3 bg-zinc-200 bg-opacity-20 w-10 border-r border-zinc-200 text-xs text-zinc-500 text-center"),$(e,"class","flex border-b "+J.tableBorderColor)},m(o,d){H(o,e,d),v(e,a),v(a,r),v(e,l);for(let c=0;c<t.length;c+=1)t[c].m(e,null);v(e,h),n=!0},p(o,d){if(d&6){s=o[4];let c;for(c=0;c<s.length;c+=1){const f=M(o,s,c);t[c]?(t[c].p(f,d),m(t[c],1)):(t[c]=Z(f),t[c].c(),m(t[c],1),t[c].m(e,h))}for(V(),c=s.length;c<t.length;c+=1)g(c);B()}},i(o){if(!n){for(let d=0;d<s.length;d+=1)m(t[d]);n=!0}},o(o){t=t.filter(Boolean);for(let d=0;d<t.length;d+=1)p(t[d]);n=!1},d(o){o&&b(e),q(t,o)}}}function Y(i){let e,a,r,l,h,n,s,t,g=i[1].columns,o=[];for(let f=0;f<g.length;f+=1)o[f]=Q(N(i,g,f));const d=f=>p(o[f],1,1,()=>{o[f]=null});let c=i[1].records&&T(i);return{c(){e=k("div"),a=k("div"),r=k("div"),l=D();for(let f=0;f<o.length;f+=1)o[f].c();h=D(),n=k("div"),c&&c.c(),this.h()},l(f){e=w(f,"DIV",{class:!0});var _=C(e);a=w(_,"DIV",{class:!0});var u=C(a);r=w(u,"DIV",{class:!0}),C(r).forEach(b),l=E(u);for(let z=0;z<o.length;z+=1)o[z].l(u);u.forEach(b),h=E(_),n=w(_,"DIV",{class:!0});var I=C(n);c&&c.l(I),I.forEach(b),_.forEach(b),this.h()},h(){$(r,"class","p-3 w-10 border-r border-zinc-200"),$(a,"class","drop-shadow-md flex "+J.tableBorderColor+" bg-zinc-200 border-b"),$(n,"class",s="flex-grow "+(i[0]?i[0]:"")),$(e,"class","overflow-y-scroll h-full flex flex-col")},m(f,_){H(f,e,_),v(e,a),v(a,r),v(a,l);for(let u=0;u<o.length;u+=1)o[u].m(a,null);v(e,h),v(e,n),c&&c.m(n,null),t=!0},p(f,[_]){if(_&2){g=f[1].columns;let u;for(u=0;u<g.length;u+=1){const I=N(f,g,u);o[u]?(o[u].p(I,_),m(o[u],1)):(o[u]=Q(I),o[u].c(),m(o[u],1),o[u].m(a,null))}for(V(),u=g.length;u<o.length;u+=1)d(u);B()}f[1].records?c?(c.p(f,_),_&2&&m(c,1)):(c=T(f),c.c(),m(c,1),c.m(n,null)):c&&(V(),p(c,1,1,()=>{c=null}),B()),(!t||_&1&&s!==(s="flex-grow "+(f[0]?f[0]:"")))&&$(n,"class",s)},i(f){if(!t){for(let _=0;_<g.length;_+=1)m(o[_]);m(c),t=!0}},o(f){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)p(o[_]);p(c),t=!1},d(f){f&&b(e),q(o,f),c&&c.d()}}}function ee(i,e,a){const r=U();let{fixedHeight:l}=e,{table:h}=e;const n=(s,t)=>r("editCell",{table:h,columnIdx:s,recordIdx:t});return i.$$set=s=>{"fixedHeight"in s&&a(0,l=s.fixedHeight),"table"in s&&a(1,h=s.table)},[l,h,r,n]}class se extends K{constructor(e){super();L(this,e,ee,Y,O,{fixedHeight:0,table:1})}}export{se as default};
