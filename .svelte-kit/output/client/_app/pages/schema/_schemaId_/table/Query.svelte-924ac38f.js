import{S as ie,i as oe,s as ae,l as Y,g as I,E as G,d as c,u as ce,e as p,t as x,c as _,a as m,h as w,b as g,M as o,j as fe,Q as re,k as O,m as Q}from"../../../../chunks/index-bed072e4.js";import{t as F}from"../../../../chunks/themes-fa5ad8e6.js";import"../../../../chunks/randomColor-af782e7b.js";import"../../../../chunks/lodash-8a03b776.js";let Z=36,ne="";for(;Z--;)ne+=Z.toString(36);function B(s=11){let e="",t=s;for(;t--;)e+=ne[Math.random()*36|0];return e}const he=s=>s.replace(/[|\\{}()[\]^$+*?.-]/g,e=>`\\${e}`),ue=({terms:s,matchExactly:e=!1})=>{if(typeof s!="string")throw new TypeError("Expected a string");const t=he(s.trim());return`(${e?t:t.split(" ").join("|")})`},de=({terms:s,matchExactly:e=!1})=>{try{const t=/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.exec(s);return t?new RegExp(t[2],t[3]):new RegExp(ue({terms:s,matchExactly:e}),"ig")}catch{throw new TypeError("Expected terms to be either a string or a RegExp!")}},pe=s=>e=>e!==null&&typeof e!="undefined"&&s in e,j=pe("match"),S=s=>typeof s!="undefined";function _e({curr:s,next:e,prev:t,clipBy:l=3}){const r=s.text.split(" "),i=r.length;if(s.match||l>=i)return s.text;const n="...";return S(e)&&S(t)&&j(t)&&j(e)?i>l*2?[...r.slice(0,l),n,...r.slice(-l)].join(" "):s.text:S(e)&&j(e)?[n,...r.slice(-l)].join(" "):S(t)&&j(t)?[...r.slice(0,l),n].join(" "):s.text}var N=Object.assign;const me=s=>s.length>0,ge=({text:s,query:e,clipBy:t,matchExactly:l=!1})=>{const r=typeof e=="string"?e.trim():e;if(r==="")return[{key:B(),text:s,match:!1}];const i=de({terms:e,matchExactly:l});return s.split(i).filter(me).map(n=>({key:B(),text:n,match:l?n.toLowerCase()===r.toLowerCase():i.test(n)})).map((n,h,f)=>N(N({},n),typeof t=="number"&&{text:_e(N(N(N({curr:n},h<f.length-1&&{next:f[h+1]}),h>0&&{prev:f[h-1]}),{clipBy:t}))}))};function $(s,e,t){const l=s.slice();return l[4]=e[t],l}function ee(s,e,t){const l=s.slice();return l[7]=e[t],l}function ve(s){let e,t;return{c(){e=p("div"),t=x("Not allowed"),this.h()},l(l){e=_(l,"DIV",{class:!0});var r=m(e);t=w(r,"Not allowed"),r.forEach(c),this.h()},h(){g(e,"class","p-2 text-zinc-800")},m(l,r){I(l,e,r),o(e,t)},p:G,d(l){l&&c(e)}}}function be(s){let e,t,l,r,i,n,h,f,v,E,T,L,M,y,z,P,U,V,k,W,D,C=s[1],d=[];for(let u=0;u<C.length;u+=1)d[u]=le($(s,C,u));return{c(){e=p("div"),t=p("div"),l=p("h3"),r=x("View Query"),i=O(),n=p("button"),h=p("i"),f=x(" Edit in View Builder"),v=O(),E=p("button"),T=p("i"),L=x(" Copy"),M=O(),y=p("p"),z=p("i"),P=x("Warning: Once you edit the generated query, you cannot go back and use the view editor interface to update or modify this view."),U=O(),V=p("div"),k=p("code");for(let u=0;u<d.length;u+=1)d[u].c();W=O(),D=p("div"),this.h()},l(u){e=_(u,"DIV",{class:!0});var b=m(e);t=_(b,"DIV",{class:!0});var a=m(t);l=_(a,"H3",{class:!0});var R=m(l);r=w(R,"View Query"),R.forEach(c),i=Q(a),n=_(a,"BUTTON",{class:!0});var q=m(n);h=_(q,"I",{class:!0}),m(h).forEach(c),f=w(q," Edit in View Builder"),q.forEach(c),v=Q(a),E=_(a,"BUTTON",{class:!0});var H=m(E);T=_(H,"I",{class:!0}),m(T).forEach(c),L=w(H," Copy"),H.forEach(c),a.forEach(c),M=Q(b),y=_(b,"P",{class:!0});var X=m(y);z=_(X,"I",{class:!0}),m(z).forEach(c),P=w(X,"Warning: Once you edit the generated query, you cannot go back and use the view editor interface to update or modify this view."),X.forEach(c),U=Q(b),V=_(b,"DIV",{class:!0});var J=m(V);k=_(J,"CODE",{class:!0});var K=m(k);for(let A=0;A<d.length;A+=1)d[A].l(K);K.forEach(c),J.forEach(c),W=Q(b),D=_(b,"DIV",{class:!0});var se=m(D);se.forEach(c),b.forEach(c),this.h()},h(){g(l,"class","text-zinc-800"),g(h,"class","ri-edit-line align-bottom "+F.primaryTextColor),g(n,"class","ml-auto text-zinc-800"),g(T,"class","ri-clipboard-line align-bottom "+F.primaryTextColor),g(E,"class","text-zinc-800"),g(t,"class","flex items-center space-x-4"),g(z,"class","ri-error-warning-fill align-bottom"),g(y,"class","text-sm text-zinc-500"),g(k,"class","text-zinc-800 text-sm space-y-1"),g(V,"class","border p-2 border-zinc-200"),g(D,"class","flex w-full"),g(e,"class","flex-grow space-y-2 "+F.darkBackgroundColor+" p-4 border-b-4 border-zinc-200")},m(u,b){I(u,e,b),o(e,t),o(t,l),o(l,r),o(t,i),o(t,n),o(n,h),o(n,f),o(t,v),o(t,E),o(E,T),o(E,L),o(e,M),o(e,y),o(y,z),o(y,P),o(e,U),o(e,V),o(V,k);for(let a=0;a<d.length;a+=1)d[a].m(k,null);o(e,W),o(e,D)},p(u,b){if(b&2){C=u[1];let a;for(a=0;a<C.length;a+=1){const R=$(u,C,a);d[a]?d[a].p(R,b):(d[a]=le(R),d[a].c(),d[a].m(k,null))}for(;a<d.length;a+=1)d[a].d(1);d.length=C.length}},d(u){u&&c(e),re(d,u)}}}function te(s){let e,t,l,r=s[7].text+"",i,n,h;return{c(){e=x(`
                    `),t=p("div"),l=x(`
                        `),i=x(r),n=x(`
                    `),h=x(`
                `),this.h()},l(f){e=w(f,`
                    `),t=_(f,"DIV",{class:!0});var v=m(t);l=w(v,`
                        `),i=w(v,r),n=w(v,`
                    `),v.forEach(c),h=w(f,`
                `),this.h()},h(){g(t,"class","rounded inline px-1")},m(f,v){I(f,e,v),I(f,t,v),o(t,l),o(t,i),o(t,n),I(f,h,v)},p(f,v){v&2&&r!==(r=f[7].text+"")&&fe(i,r)},d(f){f&&c(e),f&&c(t),f&&c(h)}}}function le(s){let e,t=s[4],l=[];for(let r=0;r<t.length;r+=1)l[r]=te(ee(s,t,r));return{c(){e=p("pre");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=_(r,"PRE",{class:!0});var i=m(e);for(let n=0;n<l.length;n+=1)l[n].l(i);i.forEach(c),this.h()},h(){g(e,"class","flex")},m(r,i){I(r,e,i);for(let n=0;n<l.length;n+=1)l[n].m(e,null)},p(r,i){if(i&2){t=r[4];let n;for(n=0;n<t.length;n+=1){const h=ee(r,t,n);l[n]?l[n].p(h,i):(l[n]=te(h),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(r){r&&c(e),re(l,r)}}}function xe(s){let e;function t(i,n){return i[0]?be:ve}let l=t(s),r=l(s);return{c(){r.c(),e=Y()},l(i){r.l(i),e=Y()},m(i,n){r.m(i,n),I(i,e,n)},p(i,[n]){l===(l=t(i))&&r?r.p(i,n):(r.d(1),r=l(i),r&&(r.c(),r.m(e.parentNode,e)))},i:G,o:G,d(i){r.d(i),i&&c(e)}}}function we(s,e,t){let{table:l}=e,r=[],{allowed:i}=e;return ce(()=>{let n=l.query.split(`\r
`);t(1,r=n.map(h=>ge({text:h,query:"/(column1|column2)/"})))}),s.$$set=n=>{"table"in n&&t(2,l=n.table),"allowed"in n&&t(0,i=n.allowed)},[i,r,l]}class Ve extends ie{constructor(e){super();oe(this,e,we,xe,ae,{table:2,allowed:0})}}export{Ve as default};
